<!doctype html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title>{{ block "title" . }}
      {{ if eq  .Title  .Site.Title }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}
    {{ end }}</title>

    <style>
      {{- $fonts := resources.Get "css/fonts.css" | toCSS | minify }}
      {{- $syntax := resources.Get "css/syntax.css" | toCSS | minify }}
      {{- $skeleton := resources.Get "css/skeleton.css" | toCSS | minify }}
      {{- $base := resources.Get "css/base.css" | toCSS | minify }}
      {{- $layout := resources.Get "css/layout.css" | toCSS | minify }}
      {{- $style := slice $fonts $syntax $skeleton $base $layout | resources.Concat "css/bundle.css" }}
      {{- $style.Content | safeCSS }}
    </style>
    <!-- <link rel="stylesheet" type="text/css" href="/static/css/style.css"> -->

    <link rel="preload" href="/static/fonts/open-sans-regular.ttf/" type="font/ttf" as="font" crossorigin="anonymous">
    <link rel="preload" href="/static/images/gravatar.jpg/" as="image">
    {{ block "header" . }}
    {{ end }}

    <link href="https://feeds.feedburner.com/sirupsen" rel="alternate" title="Sirupsen" type="application/atom+xml" /> 

    <script>
      (function (w,d,s,o,f,js,fjs) {
        w[o] = w[o] || function () { (w[o].q = w[o].q || []).push(arguments) };
        js = d.createElement(s), fjs = d.getElementsByTagName(s)[0];
        js.id = o; js.src = f; js.async = 1; fjs.parentNode.insertBefore(js, fjs);
      }(window, document, 'script', 'plausible', 'https://plausible.io/js/p.js'));
      plausible('page')
    </script>

    <link rel="icon" href="data:;base64,=">
  </head>
  <body>
    <div class="container">	
      <div id='mobile' class='two columns hidden'>
        <ul>
          <li><a href="/">Simon Hørup Eskildsen</a></li>
          <li><a href="mailto:simon@sirupsen.com">simon@sirupsen.com</a></li>
          <li style="margin-bottom: 16px;"><a href="https://twitter.com/sirupsen">@sirupsen</a></li>
          <li><a href="/about/">About</a></br></li>
          <li><a href="/books/">Book Reviews</a></li>
          <li><a href="/napkin/">Monthly Napkin Math</a></li>
          <li><a href="/subscribe/">Subscribe to new posts</a></li>
        </ul>
      </div>

      <div class="four columns sidebar">
        <section>
          <a id="avatar" href="/"></a>

          <ul id="social">
            <li>
              <a href="mailto:simon@sirupsen.com?subject=Hi" id="sidebar-email" title="Say hi">
                <svg  height="23px": style="fill: #999" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg>
              </a>
            </li>

            <li>
              <a href="https://www.linkedin.com/in/sirupsen" id="sidebar-linkedin" style="font-size: 21px;">
                <svg height="20px": style="fill: #999" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448.1 512"><path d="M100.3 448H7.4V148.9h92.9V448zM53.8 108.1C24.1 108.1 0 83.5 0 53.8S24.1 0 53.8 0s53.8 24.1 53.8 53.8-24.1 54.3-53.8 54.3zM448 448h-92.7V302.4c0-34.7-.7-79.2-48.3-79.2-48.3 0-55.7 37.7-55.7 76.7V448h-92.8V148.9h89.1v40.8h1.3c12.4-23.5 42.7-48.3 87.9-48.3 94 0 111.3 61.9 111.3 142.3V448h-.1z"/></svg>
              </a>
            </li>

            <li>
              <a href="https://twitter.com/Sirupsen" id="sidebar-twitter">
                <svg height="21px" style="fill: #999;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
              </a>
            </li>

            <li>
              <a href="https://github.com/Sirupsen" id="sidebar-github">
                <svg height="23px" style="fill: #999;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
              </a>
            </li>
          </ul>

          <ul id="me">
            <li>Simon Hørup Eskildsen</span></li>
            <li class="gray">
              Director of Infrastructure Engineering <a href="http://shopify.com">@Shopify</a>
            </li>
            <li><br/></li>
            <!-- remember to put in mobile section too! -->
            <li><a href="/about/">About</a></li>
            <li><a href="/books/">Book Reviews</a></li>
            <li><a href="/napkin/">Monthly Napkin Math</a></li>
            <li><a href="/subscribe/">Subscribe to new posts</a></li>
            <li><a href="https://feeds.feedburner.com/sirupsen">RSS</a></li>
          </ul>

        </section>
      </div>

      {{ block "main" . }}
      {{ end }}
    </div>

    <script>
      /* Inline this because we're well under the initial congestion window for
      this page already, so putting it in a new request doesn't accomplish much.
      This'll preload links that are hovered for faster loading. */
      /*! instant.page v1.1.0 - (C) 2019 Alexandre Dieulot - https://instant.page/license */

      let urlToPreload
      let mouseoverTimer
      let lastTouchTimestamp

      const prefetcher = document.createElement('link')
      const isSupported = prefetcher.relList && prefetcher.relList.supports && prefetcher.relList.supports('prefetch')
      const allowQueryString = 'instantAllowQueryString' in document.body.dataset

      if (isSupported) {
        prefetcher.rel = 'prefetch'
        document.head.appendChild(prefetcher)

        const eventListenersOptions = {
          capture: true,
          passive: true,
        }
        document.addEventListener('touchstart', touchstartListener, eventListenersOptions)
        document.addEventListener('mouseover', mouseoverListener, eventListenersOptions)
      }

      function touchstartListener(event) {
        /* Chrome on Android calls mouseover before touchcancel so `lastTouchTimestamp`
         * must be assigned on touchstart to be measured on mouseover. */
        lastTouchTimestamp = performance.now()

        const linkElement = event.target.closest('a')

        if (!linkElement) {
          return
        }

        if (!isPreloadable(linkElement)) {
          return
        }

        linkElement.addEventListener('touchcancel', touchendAndTouchcancelListener, {passive: true})
        linkElement.addEventListener('touchend', touchendAndTouchcancelListener, {passive: true})

        urlToPreload = linkElement.href
        preload(linkElement.href)
      }

      function touchendAndTouchcancelListener() {
        urlToPreload = undefined
        stopPreloading()
      }

      function mouseoverListener(event) {
        if (performance.now() - lastTouchTimestamp < 1100) {
          return
        }

        const linkElement = event.target.closest('a')

        if (!linkElement) {
          return
        }

        if (!isPreloadable(linkElement)) {
          return
        }

        linkElement.addEventListener('mouseout', mouseoutListener, {passive: true})

        urlToPreload = linkElement.href

        mouseoverTimer = setTimeout(() => {
          preload(linkElement.href)
          mouseoverTimer = undefined
        }, 65)
      }

      function mouseoutListener(event) {
        if (event.relatedTarget && event.target.closest('a') == event.relatedTarget.closest('a')) {
          return
        }

        if (mouseoverTimer) {
          clearTimeout(mouseoverTimer)
          mouseoverTimer = undefined
        }
        else {
          urlToPreload = undefined
          stopPreloading()
        }
      }

      function isPreloadable(linkElement) {
        if (urlToPreload == linkElement.href) {
          return
        }

        const urlObject = new URL(linkElement.href)

        if (urlObject.origin != location.origin) {
          return
        }

        if (!allowQueryString && urlObject.search && !('instant' in linkElement.dataset)) {
          return
        }

        if (urlObject.hash && urlObject.pathname + urlObject.search == location.pathname + location.search) {
          return
        }

        if ('noInstant' in linkElement.dataset) {
          return
        }

        return true
      }

      function preload(url) {
        prefetcher.href = url
      }

      function stopPreloading() {
        /* The spec says an empty string should abort the prefetching
        * but Firefox 64 interprets it as a relative URL to prefetch. */
        prefetcher.removeAttribute('href')
      }
    </script>
  </body>
</html> 
